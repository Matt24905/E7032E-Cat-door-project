-------------------------------------------------------------------------------------------------------------------------------------------------------------
                                WEEK 41
THIS WEEK: 
- simulate circuit with values from measurments (low voltage/current source representing photodiode)
‚úî check that the OP amp meets our needs - It did not! Got a better suggestion from Johan Borg :D
‚úî learn how to use low power microcontroller to have as a startup for raspberry PI to save power
- implement detection and startup script   ("cat detected"/"start reading chip")
- hopefully get OP amp to build the circuit
- write report!

Monday
    Grand Meeting / Presentation.


Tuesday
   ‚úî Group meeting 10:15
   ‚úî Learn/Use ATTINY85 
        - PWM Turn on IR 150 ms intervalls  (for about 1 ms?) 
        - Detect changes in voltage |absolute value|
        - Turn on lamp when detected (this will later turn on Raspberry PI)
        - If no/wrong chip detected --> Turn off RaspPI and Start searching again

  LINKS:
    https://highlowtech.org/?p=1695 - Another example is ATmega328P ?
    https://www.instructables.com/Programming-the-ATtiny85-from-Raspberry-Pi/ 
    https://www.youtube.com/watch?v=i9WOwDrpRKs&ab_channel=DavidWatts

    Best/Newest/Simplest:
    üëâ https://www.youtube.com/watch?v=JGf6P52LO5c&ab_channel=THEELECTRONICGUY

    Pinout:
      https://www.hackster.io/alaspuresujay/use-an-attiny85-with-arduino-ide-07740c

    Datasheet:
      https://ww1.microchip.com/downloads/en/DeviceDoc/Atmel-2586-AVR-8-bit-Microcontroller-ATtiny25-ATtiny45-ATtiny85_Datasheet.pdf

    - Went well! Programmed through Arduino IDE
    - Tested script with separate voltage source
    - Need to borrow another micro USB ._. but. can do without.


Wednesday
    - Implement PWM signal
    - Test on oscilloscope, check that it is properly 150ms/1ms
    - Write script to detect peaks 
    - Simulate if time over



-------------------------------------------------------------------------------------------------------------------------------------------------------------
                                WEEK 40

    TODO: 
    - Test both actual current response and input via Raspberry Pi
    - Learn Raspberry PI and Python coding
    - Actually WRITE REPORT and TIME LOG
    - Start with a simple circuit -> Build amplifier if needed.

Monday
    Grand Meeting / Presentation.

Tuesday
    Group meeting 10:15
    Got to take over task to build IR circuit.
    Calculated some forward currents etc for circuit.
    Completed a tutorial for Raspberry Pi Pico and collected links etc. for MicroPython documentation.

Wednesday
    Rebuilt the circuit again(!)
    Still having problem with small current/voltage when using indirect position of sensor. Group says it should work and we don't need amplifier. A bit lost and don't know what to do.
    Tested several things like increasing voltage and decreasing resistance for IR diode. Increasing resistance for photodiode. 
    More researching. Can't find any IR sensor circuit that doesn't use amplifier.

Thursday
    Tested building an amplifier with uA741. Bad response. Think the current might be to small? Also got very slow and unstable response.

Friday
    Showed the circuit and that the voltage was too small to be recognized by Raspberry Pi. Did the same tests again with a lab partner.
    Finally came to conclusion to add a transimpedance amplifier and got to put another OP amp in the shopping list.


-------------------------------------------------------------------------------------------------------------------------------------------------------------
                                WEEK 39

    TODO:   - "Simplifiera och g√∂r n√•got som funkar"
            - Decide which circuit option to build. 
            - Write in report. 
            - Do more testing. 
            - Read about low power microcontroller and ask if we shall implement it.
            - Simulate circuits and decide on components.
            - NE555 timer IC?



Monday
  Updated power point with IR sensor current response. Unfortunately not used.
  Recap of last week.
  Grand Meeting / Presentation.


Tuesday
    ATtiny85 low effect microcontroller
    intervaller 
    

-------------------------------------------------------------------------------------------------------------------------------------------------------------
WEEK 38

Monday
  Grand Meeting / Presentation.


Tuesday
  - Working on Arduino code for IR sensor and measurement.
  - Testing oscilloscope in project room :)
  - Want to add an op-amp and potentiometer to the circuit and look up correct resistance for IR-diode in hand.


Wednesday
  - "Research": 
      We probably want a transresistance amplifier circuit since photodiode gives change in current (or actually resistance). Convert to a voltage gain. 
      Standard op amp seems to be LM358.
      Example circuit:
      https://www.ti.com/lit/an/sboa268a/sboa268a.pdf?ts=1695189607426&ref_url=https%253A%252F%252Fwww.google.com%252F
      How get negative power to op amp? Can we use two of the batteries for that? Probably not.
      Op amp don't function in negative temperatures? Solved by being placed on inside part of door?
      Can we use a UA741 instead and how bias it differently?
      Can we get away without op amp to save power? 

  -  Simulated transresistance amp in PSpice. Compared gain LM358 and ¬µA741.

Fick hj√§lp fr√•n Johan:
TODO:   kolla hur stor str√∂mskillnad fr√•n uppm√§tt graf (anv√§nde sp√§nnings-tricket)!
        designa komparator krets utifr√•n detta, hur stor diff i str√∂m r√§cker? (kan vi skippa f√∂rst√§rkaren)?
        hitta l√§mplig komponenter komparator: l√§ckstr√∂m (ca 1 nA okej), RRIO (ca 6V), gain bandwith product GBP ca 0.5 MHz okej).
        bias krets f√∂r matning fr√•n batteri (endast positiv matning) ca 4V bias punkt

        ev. inte f√∂r avancerat filter som inte d√§mpar signalen f√∂r mycket.
